/* Night mode consolidado — cores base e regras essenciais (sem duplicações) */

:root {
  --nm-bg: #0d1117;
  --nm-surface: #161b22;
  --nm-card: #21262d;
  --nm-border: #30363d;
  --nm-text: #f0f6fc;
  --nm-muted: #7d8590;
  --nm-primary: #2563eb;
  --nm-success: #10b981;
  --nm-danger: #ef4444;
}

/* Base: aplicar apenas dentro do contexto .night-mode */
.night-mode {
  background-color: var(--nm-bg) !important;
  color: var(--nm-text) !important;
  --tw-ring-color: rgba(240,246,252,0.12);
}

/* Geral: todos os seletores comuns prefixados */
.night-mode button,
.night-mode .btn,
.night-mode a,
.night-mode input,
.night-mode textarea,
.night-mode select,
.night-mode i,
.night-mode svg {
  color: var(--nm-text) !important;
  transition: background-color .18s ease, color .18s ease, border-color .18s ease;
}

/* Containers / cards / surfaces */
.night-mode .bg-white,
.night-mode .bg-gray-50,
.night-mode .bg-gray-100,
.night-mode .card,
.night-mode .shadow {
  background-color: var(--nm-card) !important;
  border: 1px solid var(--nm-border) !important;
  color: var(--nm-text) !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.35) !important;
}

/* Inputs e selects */
.night-mode input,
.night-mode textarea,
.night-mode select {
  background-color: var(--nm-surface) !important;
  color: var(--nm-text) !important;
  border: 1px solid var(--nm-border) !important;
  border-radius: .5rem;
}
.night-mode input::placeholder,
.night-mode textarea::placeholder {
  color: var(--nm-muted) !important;
}
.night-mode input:focus,
.night-mode textarea:focus,
.night-mode select:focus {
  box-shadow: 0 0 0 3px var(--tw-ring-color) !important;
  outline: none !important;
}

/* Botões */
.night-mode .btn-primary,
.night-mode .next-btn,
.night-mode .prev-btn,
.night-mode .btn {
  background-color: var(--nm-card) !important;
  color: var(--nm-text) !important;
  border: 1px solid var(--nm-border) !important;
  border-radius: .75rem;
  padding: .6rem 1rem;
  cursor: pointer;
}
.night-mode .btn-primary:hover,
.night-mode .next-btn:hover,
.night-mode .prev-btn:hover {
  background-color: #ffffff !important;
  color: var(--nm-bg) !important;
  box-shadow: 0 6px 18px rgba(37,99,235,0.12);
}

/* Links com comportamento consistente */
.night-mode a {
  color: var(--nm-text) !important;
  text-decoration: none;
}
.night-mode a:hover { color: var(--nm-bg) !important; }

/* Indicadores e progress bar */
.night-mode .step-indicator {
  width: 44px; height: 44px; border-radius: 9999px;
  background: var(--nm-card); border: 2px solid var(--nm-border);
  display:flex;align-items:center;justify-content:center;font-weight:700;
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
}
.night-mode .step-indicator.active {
  background: linear-gradient(135deg,var(--nm-primary), #3b82f6);
  color: #fff; transform: translateY(-6px) scale(1.05);
  box-shadow: 0 8px 22px rgba(37,99,235,0.18);
}
.night-mode #progress-bar { background: linear-gradient(90deg,#2563eb,#3b82f6) !important; }

/* Cards de seguro / listagens */
.night-mode .seguro-card,
.night-mode .insurance-card {
  background: var(--nm-card) !important;
  border: 1px solid var(--nm-border) !important;
  border-radius: 12px; overflow: hidden;
  color: var(--nm-text) !important;
}
.night-mode .seguro-card.selected,
.night-mode .insurance-card.selected {
  border-color: rgba(37,99,235,0.95) !important;
  box-shadow: 0 8px 20px rgba(37,99,235,0.12) !important;
  transform: translateY(-4px);
}
.night-mode .seguro-card .details-link,
.night-mode .insurance-card a { color: var(--nm-text) !important; }

/* Ícones (FontAwesome / SVG) */
.night-mode i, .night-mode svg { color: var(--nm-text) !important; }
.night-mode .text-blue-500, .night-mode .text-purple-500, .night-mode .text-green-500 {
  color: var(--nm-text) !important;
}

/* Mensagens, avisos, erros */
.night-mode .alert, .night-mode .bg-yellow-50, .night-mode .bg-red-50 {
  background-color: var(--nm-card) !important;
  border: 1px solid var(--nm-border) !important;
  color: var(--nm-text) !important;
}
.night-mode .text-red-600 { color: var(--nm-danger) !important; }
.night-mode .text-green-600 { color: var(--nm-success) !important; }

/* Modal / dropdown / map info windows */
.night-mode .modal, .night-mode .dropdown-menu,
.night-mode .gm-style-iw, .night-mode .gm-style-iw-d {
  background: var(--nm-card) !important;
  color: var(--nm-text) !important;
  border: 1px solid var(--nm-border) !important;
  box-shadow: 0 8px 30px rgba(0,0,0,0.5) !important;
}

/* Scrollbars */
.night-mode ::-webkit-scrollbar { width: 8px; background: var(--nm-surface); }
.night-mode ::-webkit-scrollbar-thumb { background: var(--nm-border); border-radius: 6px; }
.night-mode ::-webkit-scrollbar-thumb:hover { background: #6e7681; }

/* Tables */
.night-mode table, .night-mode th, .night-mode td {
  background: var(--nm-bg) !important;
  color: var(--nm-text) !important;
  border-color: var(--nm-border) !important;
}

/* Elementos específicos corrigidos (mantém compatibilidade com o projeto) */
.night-mode #new-trip, .night-mode #profile-button { color: var(--nm-text) !important; }
.night-mode .ver-detalhes-btn {
  background: var(--nm-card) !important; color: var(--nm-text) !important;
  border: 1px solid var(--nm-border) !important; padding: .5rem .75rem; border-radius:.75rem;
}
.night-mode .ver-detalhes-btn:hover { background: #fff !important; color: var(--nm-bg) !important; }

/* Inputs type date/icons - garantir contraste */
.night-mode input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1) !important; }

/* Helpers */
.night-mode .badge-days, .night-mode .badge-travelers {
  background: var(--nm-card) !important; color: var(--nm-text) !important; border: 1px solid var(--nm-border) !important;
}

/* Acessibilidade / focus */
.night-mode :focus { outline: none !important; box-shadow: 0 0 0 3px var(--tw-ring-color) !important; }

/* Regras finais: garantir que seletores anteriores sem prefixo estejam cobertos */
.night-mode a[href^="/myTrips"]:hover,
.night-mode a[href^="/myProfile"]:hover,
.night-mode a[href^="/config"]:hover { color: var(--nm-bg) !important; }

/* =========================
   OVERRIDES ESPECÍFICOS REQUERIDOS
   ========================= */

/* Manter cor branca para links "Ver Detalhes" de viagens (ex: /viagens/...) */
.night-mode a[href^="/viagens/"],
.night-mode a[href^="http://127.0.0.1:8000/viagens/"] {
  color: var(--nm-text) !important;
}
.night-mode a[href^="/viagens/"]:hover,
.night-mode a[href^="http://127.0.0.1:8000/viagens/"]:hover {
  color: var(--nm-text) !important;
}

/* Títulos específicos — forçar branco exceto quando o próprio elemento tem fundo branco */
.night-mode h1.text-2xl.text-black:not(.bg-white),
.night-mode h1.text-2xl.font-bold.text-black:not(.bg-white),
.night-mode h1.text-2xl.text-black:not(.bg-white) * {
  color: var(--nm-text) !important;
}

/* H2 que usa group-hover:text-blue-600 — impedir que fique azul/escuro em hover do grupo */
.night-mode .group:hover .group-hover\:text-blue-600,
.night-mode h2.group-hover\:text-blue-600,
.night-mode h2.group-hover\:text-blue-600 * {
  color: var(--nm-text) !important;
}

/* H4 e H3 específicos */
.night-mode h4.text-lg.font-medium.text-gray-900:not(.bg-white),
.night-mode h3.text-xl.font-semibold.text-gray-900:not(.bg-white) {
  color: var(--nm-text) !important;
}

/* Exceção: se o próprio elemento tem fundo branco, não sobrescrever (mantém preto) */
.night-mode .bg-white h1,
.night-mode .bg-white h2,
.night-mode .bg-white h3,
.night-mode .bg-white h4 {
  color: inherit !important;
}

/* BOTÕES e links-exibidos-como-botões — fundo preto + fonte branca, hover mantém fonte branca */
.night-mode #new-trip,
.night-mode #new-trip a,
.night-mode .btn-primary,
.night-mode .next-btn,
.night-mode .prev-btn,
.night-mode a.group,
.night-mode a.bg-gradient-to-r,
.night-mode a.bg-gradient-to-r:hover,
.night-mode a.group:hover {
  background-color: var(--nm-bg) !important;
  color: var(--nm-text) !important;
  border-color: var(--nm-bg) !important;
  text-decoration: none !important;
  box-shadow: none !important;
}

/* Garantir que ícones e textos dentro dos botões também fiquem brancos */
.night-mode #new-trip i,
.night-mode #new-trip span,
.night-mode .btn-primary i,
.night-mode .btn-primary span,
.night-mode .next-btn i,
.night-mode .next-btn span,
.night-mode a.group i,
.night-mode a.group span {
  color: var(--nm-text) !important;
  fill: none !important;
  stroke: var(--nm-text) !important;
}

/* Forçar que o hover NÃO transforme a fonte em preto (manter branca) */
.night-mode #new-trip:hover,
.night-mode .btn-primary:hover,
.night-mode .next-btn:hover,
.night-mode .prev-btn:hover,
.night-mode a.group:hover,
.night-mode a.bg-gradient-to-r:hover {
  color: var(--nm-text) !important;
}

/* Mais específico para o botão "Ver Detalhes" do exemplo (grupo com ícone) */
.night-mode a.group.flex.items-center.bg-gradient-to-r,
.night-mode a.group.flex.items-center.bg-gradient-to-r * {
  background-color: var(--nm-bg) !important;
  color: var(--nm-text) !important;
}

/* Segurança: garantir que estes overrides não alterem componentes com fundo branco explícito */
.night-mode .bg-white .btn,
.night-mode .bg-white a,
.night-mode .bg-white .step-label,
.night-mode .bg-white .step-indicator {
  color: inherit !important;
  background: inherit !important;
  border-color: inherit !important;
}

/* =========================
   Overrides: ícones com fundo escuro (Dark Mode)
   Usa somente as cores definidas no tema (--nm-*)
   ========================= */

/* Tornar todos os "bg-*-100" usados como círculos/badges com fundo de card escuro */
.night-mode .bg-blue-100,
.night-mode .bg-green-100,
.night-mode .bg-purple-100,
.night-mode .bg-pink-100,
.night-mode .bg-indigo-100,
.night-mode .bg-yellow-100,
.night-mode .w-8.h-8.bg-blue-100,
.night-mode .w-16.h-16.bg-gray-100 {
  background-color: var(--nm-card) !important; /* fundo de cards escuro */
  border: 1px solid var(--nm-border) !important;
  color: var(--nm-text) !important;
}

/* Garantir que ícones/ svgs dentro desses badges fiquem brancos e com stroke/fill apropriado */
.night-mode .bg-blue-100 i,
.night-mode .bg-blue-100 svg,
.night-mode .bg-green-100 i,
.night-mode .bg-green-100 svg,
.night-mode .bg-purple-100 i,
.night-mode .bg-purple-100 svg,
.night-mode .w-8.h-8.bg-blue-100 i,
.night-mode .w-8.h-8.bg-blue-100 svg {
  color: var(--nm-text) !important;
  stroke: var(--nm-text) !important;
  fill: none !important;
}

/* Em alguns casos os ícones têm classes text-*-500; forçar para branco no contexto night-mode */
.night-mode .bg-blue-100 .text-blue-500,
.night-mode .bg-green-100 .text-green-500,
.night-mode .bg-purple-100 .text-purple-500 {
  color: var(--nm-text) !important;
  stroke: var(--nm-text) !important;
  fill: none !important;
}

/* Ajuste fino: manter padding e arredondamento, mas visual escuro consistente */
.night-mode .bg-blue-100.p-2,
.night-mode .bg-green-100.p-2,
.night-mode .bg-blue-100.p-3,
.night-mode .bg-green-100.p-3,
.night-mode .bg-purple-100.p-3 {
  background-color: var(--nm-card) !important;
  box-shadow: none !important;
}

/* Progress bar escuro (linhas de gradiente) */
.night-mode .h-2.bg-gradient-to-r,
.night-mode .bg-gradient-to-r {
  background: linear-gradient(to right, var(--nm-surface), var(--nm-surface)) !important;
  border: none !important;
}

/* Garantir que elementos que explicitamente têm bg-white não sejam alterados por esses overrides */
.night-mode .bg-white .bg-blue-100,
.night-mode .bg-white .bg-green-100,
.night-mode .bg-white .bg-purple-100 {
  background-color: inherit !important;
  border-color: inherit !important;
  color: inherit !important;
}

/* Pequena correção para ícones com tamanho e alinhamento */
.night-mode .w-8.h-8.bg-blue-100,
.night-mode .w-16.h-16.bg-gray-100 {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* ---------------------------
   Regras adicionais solicitadas
   --------------------------- */

/* 1) Umbrella icon: mesmo visual dos badges (fundo escuro, contorno sutil, ícone branco) */
.night-mode .self-end > i.fa-umbrella-beach,
.night-mode .self-end i.fa-umbrella-beach {
  background-color: var(--nm-card) !important;
  border: 1px solid rgba(240,246,252,0.10) !important; /* contorno suave branco */
  color: var(--nm-text) !important; /* ícone branco */
  padding: 0.5rem !important;
  border-radius: 0.5rem !important;
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  box-shadow: none !important;
}

/* 2) Small purple text should remain branco no modo noturno (exceto se tiver fundo branco) */
.night-mode .text-purple-600.text-xs:not(.bg-white),
.night-mode .text-purple-600.text-xs:not(.bg-white) * {
  color: var(--nm-text) !important;
}

/* 3) Sidebar header: fundo escuro e logo branco; botões de toggle seguem o tema */
.night-mode #sidebar-header {
  background-color: var(--nm-surface) !important; /* fundo secundário escuro */
  border-bottom-color: var(--nm-border) !important;
  color: var(--nm-text) !important;
}
.night-mode #sidebar-header #logo,
.night-mode #sidebar-header #logo img,
.night-mode #sidebar-header #logo-container {
  background: transparent !important;
  color: var(--nm-text) !important;
}
/* Forçar logo branca se estiver sendo trocada por URL (compatibilidade) */
.night-mode #logo img,
.night-mode img[src*="logoagendaipreto"] {
  content: url("http://127.0.0.1:8000/imgs/logoagendaibranco.png") !important;
  filter: none !important;
}

/* Toggle sidebar icon: manter ícone branco no normal, permitir hover branco->escuro */
.night-mode button#toggle-sidebar,
.night-mode button#toggle-sidebar i,
.night-mode #toggle-sidebar .fa-solid {
  color: var(--nm-text) !important;
}
.night-mode button#toggle-sidebar:hover {
  background-color: #ffffff !important;
  color: var(--nm-bg) !important;
}

/* 4) Botão new-trip e links-que-são-botões: fundo escuro + texto branco; hover -> fundo branco texto escuro */
.night-mode #new-trip,
.night-mode #new-trip a,
.night-mode a.group,
.night-mode a.group.flex.items-center,
.night-mode a[href="/myTrips"],
.night-mode .sidebar a,
.night-mode nav a {
  background-color: var(--nm-bg) !important;
  color: var(--nm-text) !important;
  border-color: transparent !important;
}
.night-mode #new-trip:hover,
.night-mode #new-trip a:hover,
.night-mode a.group:hover,
.night-mode a[href="/myTrips"]:hover,
.night-mode .sidebar a:hover,
.night-mode nav a:hover {
  background-color: #ffffff !important;
  color: var(--nm-bg) !important;
  text-decoration: none !important;
}

/* Garantir que ícones e spans dentro desses botões herdem a cor branca no modo normal e escura no hover */
.night-mode #new-trip i,
.night-mode #new-trip span,
.night-mode a.group i,
.night-mode a.group span,
.night-mode a[href="/myTrips"] i,
.night-mode a[href="/myTrips"] .nav-text {
  color: var(--nm-text) !important;
}
.night-mode #new-trip:hover i,
.night-mode #new-trip:hover span,
.night-mode a.group:hover i,
.night-mode a.group:hover span,
.night-mode a[href="/myTrips"]:hover i,
.night-mode a[href="/myTrips"]:hover .nav-text {
  color: var(--nm-bg) !important;
}

/* 5) Nome do usuário - forçar branco */
.night-mode p.text-sm.font-medium.text-gray-900,
.night-mode p.text-sm.font-medium.text-gray-900 * {
  color: var(--nm-text) !important;
}

/* 6) Ícone .fa-sun: tornar especificamente escuro (contraste com fundo claro/hover) */
.night-mode i.fa-solid.fa-sun {
  color: var(--nm-bg) !important; /* ícone escuro */
}

/* 7) Pequena proteção: se algum desses elementos estiver dentro de .bg-white, não sobrescrever */
.night-mode .bg-white #new-trip,
.night-mode .bg-white a.group,
.night-mode .bg-white a[href="/myTrips"],
.night-mode .bg-white .self-end > i.fa-umbrella-beach {
  background: inherit !important;
  color: inherit !important;
  border-color: inherit !important;
}

/* ---------------------------
   OVERRIDES FINAIS: links, botões e textos (aplicar sempre por cima)
   --------------------------- */

/* Proteções: se quiser que um link NÃO seja afetado, adicione .no-night ao elemento */

/* 1) Forçar todos os links a terem fundo escuro + texto branco por padrão,
      exceto os marcados com .no-night ou quando estiverem dentro de .bg-white */
.night-mode a:not(.no-night) {
  background-color: var(--nm-card) !important;
  color: var(--nm-text) !important;
  text-decoration: none !important;
  border-radius: .5rem !important;
  transition: background-color .18s ease, color .18s ease !important;
}
/* Forçar também os filhos (ícones/spans) herdarem a cor branca */
.night-mode a:not(.no-night) * {
  color: var(--nm-text) !important;
  fill: none !important;
  stroke: var(--nm-text) !important;
}

/* 2) Hover de todos os links: fundo branco e texto escuro */
.night-mode a:not(.no-night):hover,
.night-mode a:not(.no-night):hover * {
  background-color: #ffffff !important;
  color: var(--nm-bg) !important;
}

/* 3) Botões: mesmo comportamento (padronizar botões do site) */
.night-mode button:not(.no-night),
.night-mode .btn:not(.no-night),
.night-mode .btn-primary:not(.no-night),
.night-mode .next-btn:not(.no-night),
.night-mode .prev-btn:not(.no-night) {
  background-color: var(--nm-card) !important;
  color: var(--nm-text) !important;
  border: 1px solid var(--nm-border) !important;
  border-radius: .75rem !important;
  padding: .45rem .9rem !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: .4rem !important;
  transition: background-color .18s ease, color .18s ease !important;
}

/* Hover dos botões: fundo branco e texto escuro */
.night-mode button:not(.no-night):hover,
.night-mode .btn:not(.no-night):hover,
.night-mode .btn-primary:not(.no-night):hover,
.night-mode .next-btn:not(.no-night):hover,
.night-mode .prev-btn:not(.no-night):hover {
  background-color: #ffffff !important;
  color: var(--nm-bg) !important;
  border-color: #ffffff !important;
}

/* 4) Capturar links com gradiente/utility classes (ex.: a.bg-gradient-to-r) */
.night-mode a[class*="bg-gradient-to"],
.night-mode a[class*="from-"],
.night-mode a[class*="to-"] {
  background-color: var(--nm-card) !important;
  color: var(--nm-text) !important;
  border: 1px solid var(--nm-border) !important;
}
.night-mode a[class*="bg-gradient-to"]:hover,
.night-mode a[class*="from-"]:hover,
.night-mode a[class*="to-"]:hover {
  background-color: #ffffff !important;
  color: var(--nm-bg) !important;
}

/* 5) Não sobrescrever elementos explicitamente dentro de blocos brancos */
.night-mode .bg-white a,
.night-mode .bg-white a * {
  color: inherit !important;
  background: inherit !important;
  border-color: inherit !important;
}

/* 6) Garantir que elementos do sidebar recebam hover branco/texto escuro */
.night-mode #sidebar a:not(.no-night) {
  background-color: var(--nm-card) !important;
  color: var(--nm-text) !important;
}
.night-mode #sidebar a:not(.no-night):hover {
  background-color: #ffffff !important;
  color: var(--nm-bg) !important;
}
.night-mode #sidebar a:not(.no-night) i,
.night-mode #sidebar a:not(.no-night) .nav-text {
  color: var(--nm-text) !important;
}
.night-mode #sidebar a:not(.no-night):hover i,
.night-mode #sidebar a:not(.no-night):hover .nav-text {
  color: var(--nm-bg) !important;
}

/* 7) Forçar textos com classes text-* a ficarem brancos no modo noturno (exceto dentro de .bg-white) */
.night-mode [class*="text-"] {
  color: var(--nm-text) !important;
}
.night-mode .bg-white [class*="text-"] {
  color: inherit !important;
}

/* 8) Exceções puntuais já citadas no código: permitir .no-night para preservar comportamento original */
.night-mode .no-night,
.night-mode .no-night * {
  color: inherit !important;
  background: inherit !important;
  border-color: inherit !important;
}

/* 9) Forçar main content com fundo do tema (aplica-se quando night-mode está ativo) */
.night-mode #main-content {
  background-color: var(--nm-bg) !important;
}

/* 10) Inverter imagens em badges/ícones (mantido) */
.night-mode .bg-blue-100 img,
.night-mode .bg-green-100 img,
.night-mode .bg-purple-100 img,
.night-mode .pref-btn img,
.night-mode .objetivo-card img,
.night-mode #logo img,
.night-mode img[src*="logoagendaipreto"] {
  filter: brightness(0) invert(1) !important;
}

/* Pequena proteção final: caso algum seletor específico precise retornar ao comportamento antigo,
   marque o elemento no HTML com a classe .no-night e ele será ignorado pelos overrides acima. */

